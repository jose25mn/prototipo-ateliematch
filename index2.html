<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protótipo AteliMatch</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React, ReactDOM & Babel for JSX transpilation in browser -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Estilo para garantir que o root ocupe toda a altura */
        html, body, #root {
            height: 100%;
            margin: 0;
            padding: 0;
            background-color: #f7fafc; /* bg-gray-100 */
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        //======================================================================
        // ÍCONES SVG (Substituindo a biblioteca lucide-react)
        //======================================================================
        const Icon = ({ children, size = 24, className = '' }) => <div style={{ width: size, height: size }} className={className}>{children}</div>;
        const Search = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg></Icon>;
        const LogOut = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg></Icon>;
        const Home = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg></Icon>;
        const ShoppingBag = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg></Icon>;
        const Archive = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="1" y="4" width="22" height="5" rx="2" ry="2"></rect><path d="M3 9v11a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9"></path><path d="M10 14h4"></path></svg></Icon>;
        const Users = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><path d="M20 8v6"></path><path d="M23 11h-6"></path></svg></Icon>;
        const Settings = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg></Icon>;
        const PlusCircle = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg></Icon>;
        const AlertCircle = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg></Icon>;
        const MapPin = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg></Icon>;
        const Phone = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg></Icon>;
        const Mail = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg></Icon>;
        const X = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></Icon>;
        const Star = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg></Icon>;
        const ArrowLeft = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg></Icon>;
        const MenuIcon = (props) => <Icon {...props}><svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" /></svg></Icon>;

        //======================================================================
        // LÓGICA DO BANCO DE DADOS VIRTUAL (localStorage)
        //======================================================================
        const { useState, useEffect } = React;

        // Função para obter dados do localStorage ou inicializar com dados mock
        const getInitialData = (key, mockData) => {
            try {
                const storedData = localStorage.getItem(key);
                if (storedData) {
                    return JSON.parse(storedData);
                }
            } catch (error) {
                console.error("Erro ao ler do localStorage:", error);
            }
            // Se não houver dados, inicializa com o mock e guarda no localStorage
            localStorage.setItem(key, JSON.stringify(mockData));
            return mockData;
        };

        // Dados Iniciais - Estes só serão usados na primeira vez que a app carregar
        const initialMockAtelies = [
          { id: 1, nome: "Costuras da Ana", endereco: "Rua das Flores, 123, Araranguá, SC", especialidade: "Ajustes e Reparos", telefone: "(48) 99988-7766", email: "ana@costuras.com", avaliacao: 4.8, images: ["https://placehold.co/600x400/f472b6/ffffff?text=Criação+1", "https://placehold.co/600x400/ec4899/ffffff?text=Criação+2", "https://placehold.co/600x400/db2777/ffffff?text=Criação+3"] },
          { id: 2, nome: "Ateliê Fio de Ouro", endereco: "Av. Central, 456, Criciúma, SC", especialidade: "Vestidos de Festa", telefone: "(48) 98877-6655", email: "contato@fiodeouro.com", avaliacao: 4.9, images: ["https://placehold.co/600x400/a855f7/ffffff?text=Festa+1", "https://placehold.co/600x400/9333ea/ffffff?text=Festa+2", "https://placehold.co/600x400/7e22ce/ffffff?text=Festa+3"] },
          { id: 3, nome: "Ponto a Ponto Alta Costura", endereco: "Praça da Matriz, 789, Sombrio, SC", especialidade: "Ternos e Roupas Sociais", telefone: "(48) 97766-5544", email: "contato@pontoaponto.com", avaliacao: 4.7, images: ["https://placehold.co/600x400/6366f1/ffffff?text=Social+1", "https://placehold.co/600x400/4f46e5/ffffff?text=Social+2", "https://placehold.co/600x400/4338ca/ffffff?text=Social+3"] },
        ];
        const initialMockPedidos = [
          { id: 101, cliente: "Maria Silva", servico: "Ajuste de vestido", dataEntrada: "2025-06-20", dataPrevista: "2025-06-28", status: "Em Progresso", valor: 50.00, costureira: "Ana" },
          { id: 102, cliente: "João Santos", servico: "Bainha de calça jeans", dataEntrada: "2025-06-22", dataPrevista: "2025-06-25", status: "Concluído", valor: 25.00, costureira: "Lúcia" },
        ];
        const initialMockEstoque = [
          { id: 1, item: "Linha Branca (cone)", quantidade: 15, nivelMinimo: 10 },
          { id: 2, item: "Linha Preta (cone)", quantidade: 8, nivelMinimo: 10 },
        ];
        const initialMockClientes = [
            { id: 1, nome: "Maria Silva", telefone: "(48) 91122-3344", email: "maria.s@email.com", desde: "2024-01-15" },
            { id: 2, nome: "João Santos", telefone: "(48) 92233-4455", email: "joao.s@email.com", desde: "2023-11-20" },
        ];
        const initialMockFaturamento = [
            { mes: 'Mar/25', valor: 1250.00 }, { mes: 'Abr/25', valor: 1800.50 }, { mes: 'Mai/25', valor: 1500.75 }, { mes: 'Jun/25', valor: 2100.00 },
        ];
        const initialMockNovosClientes = [
            { mes: 'Mar/25', quantidade: 1 }, { mes: 'Abr/25', quantidade: 2 }, { mes: 'Mai/25', quantidade: 1 }, { mes: 'Jun/25', quantidade: 3 },
        ];
        const initialMockItensGastos = [
            { item: 'Linha Preta', quantidade: 30 }, { item: 'Linha Branca', quantidade: 25 }, { item: 'Zíper 20cm', quantidade: 18 }, { item: 'Tecido Viscose', quantidade: 12 }, { item: 'Botões', quantidade: 40 },
        ];


        //======================================================================
        // COMPONENTES REACT
        //======================================================================
        const Modal = ({ isOpen, onClose, title, children }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4">
                    <div className="bg-white rounded-lg shadow-2xl w-full max-w-md m-4">
                        <div className="flex justify-between items-center p-4 border-b">
                            <h3 className="text-xl font-semibold text-gray-800">{title}</h3>
                            <button onClick={onClose} className="text-gray-400 hover:text-gray-600"><X size={24} /></button>
                        </div>
                        <div className="p-6">{children}</div>
                    </div>
                </div>
            );
        };

        const LandingPage = ({ onNavigate, onViewAtelie, atelies }) => {
            const [searchTerm, setSearchTerm] = useState('');
            const [searchResults, setSearchResults] = useState([]);

            useEffect(() => {
                if (searchTerm.trim() === '') {
                    setSearchResults([]);
                } else {
                    const results = atelies.filter(atelie =>
                        atelie.nome.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        atelie.endereco.toLowerCase().includes(searchTerm.toLowerCase())
                    );
                    setSearchResults(results);
                }
            }, [searchTerm, atelies]);

            return (
                <div className="bg-gray-50 min-h-screen">
                    <header className="bg-white shadow-sm">
                        <nav className="container mx-auto px-6 py-4 flex justify-between items-center">
                            <h1 className="text-2xl font-bold text-pink-600">AteliMatch</h1>
                            <div>
                                <button onClick={() => onNavigate('login')} className="text-gray-600 hover:text-pink-600 mr-4">Login</button>
                                <button onClick={() => onNavigate('register')} className="bg-pink-600 text-white px-4 py-2 rounded-full hover:bg-pink-700 transition">Registar Ateliê</button>
                            </div>
                        </nav>
                    </header>
                    <main className="container mx-auto px-6 py-16 text-center">
                        <h2 className="text-4xl md:text-5xl font-extrabold text-gray-800 leading-tight">Modernize a gestão do seu ateliê de costura.</h2>
                        <p className="mt-4 text-lg text-gray-600 max-w-2xl mx-auto">Centralize pedidos, controle o estoque e comunique-se com seus clientes de forma fácil e eficiente.</p>
                        <div className="mt-10 max-w-2xl mx-auto">
                            <div className="relative">
                                <input
                                    type="text"
                                    placeholder="Encontre um ateliê por nome ou localidade..."
                                    className="w-full pl-12 pr-4 py-3 border border-gray-300 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-pink-500"
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                />
                                <Search className="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400" size={20}/>
                            </div>
                            {searchResults.length > 0 && (
                                <div className="mt-4 bg-white rounded-lg shadow-lg text-left">
                                    <ul className="divide-y divide-gray-200">
                                        {searchResults.map(atelie => (
                                            <li key={atelie.id} onClick={() => onViewAtelie(atelie)} className="p-4 hover:bg-pink-50 cursor-pointer">
                                                <p className="font-bold text-pink-600">{atelie.nome}</p>
                                                <p className="text-sm text-gray-600">{atelie.endereco}</p>
                                                <p className="text-sm text-gray-500">{atelie.especialidade}</p>
                                            </li>
                                        ))}
                                    </ul>
                                </div>
                            )}
                        </div>
                    </main>
                    <footer className="bg-white mt-16">
                        <div className="container mx-auto px-6 py-8 text-center text-gray-600">
                            <p>&copy; {new Date().getFullYear()} AteliMatch. Todos os direitos reservados.</p>
                            <p className="text-sm mt-2">Um projeto da Universidade Federal de Santa Catarina.</p>
                        </div>
                    </footer>
                </div>
            );
        };

        const AtelieDetailPage = ({ atelie, onNavigate }) => {
            const Rating = ({ value }) => {
                const fullStars = Math.floor(value);
                const halfStar = value % 1 !== 0;
                const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);
                return (
                    <div className="flex items-center">
                        {[...Array(fullStars)].map((_, i) => <Star key={`full-${i}`} className="text-yellow-400 fill-current" size={20}/>)}
                        {halfStar && <Star key="half" className="text-yellow-400 fill-current" size={20} style={{ clipPath: 'polygon(0 0, 50% 0, 50% 100%, 0 100%)' }} />}
                        {[...Array(emptyStars)].map((_, i) => <Star key={`empty-${i}`} className="text-gray-300 fill-current" size={20}/>)}
                        <span className="ml-2 text-gray-600 font-semibold">{value}</span>
                    </div>
                );
            };

            return (
                <div className="bg-gray-50 min-h-screen">
                    <header className="bg-white shadow-sm">
                        <nav className="container mx-auto px-6 py-4 flex justify-between items-center">
                            <h1 className="text-2xl font-bold text-pink-600">AteliMatch</h1>
                            <div>
                                <button onClick={() => onNavigate('login')} className="text-gray-600 hover:text-pink-600 mr-4">Login</button>
                                <button onClick={() => onNavigate('register')} className="bg-pink-600 text-white px-4 py-2 rounded-full hover:bg-pink-700 transition">Registar Ateliê</button>
                            </div>
                        </nav>
                    </header>
                    <main className="container mx-auto px-6 py-10">
                        <button onClick={() => onNavigate('landing')} className="flex items-center text-pink-600 hover:text-pink-800 font-semibold mb-6">
                            <ArrowLeft size={20} className="mr-2" />
                            Voltar à busca
                        </button>
                        <div className="bg-white p-8 rounded-lg shadow-lg">
                            <div className="flex flex-col md:flex-row gap-8">
                                <div className="md:w-2/3">
                                    <h2 className="text-4xl font-bold text-gray-800">{atelie.nome}</h2>
                                    <p className="text-lg text-gray-600 mt-2">{atelie.especialidade}</p>
                                    <div className="mt-4"><Rating value={atelie.avaliacao} /></div>
                                    <div className="mt-6 border-t pt-6 space-y-4">
                                        <div className="flex items-center text-gray-700">
                                            <MapPin size={20} className="mr-3 text-pink-500"/><span>{atelie.endereco}</span>
                                        </div>
                                        <div className="flex items-center text-gray-700">
                                            <Phone size={20} className="mr-3 text-pink-500"/><span>{atelie.telefone}</span>
                                        </div>
                                        <div className="flex items-center text-gray-700">
                                            <Mail size={20} className="mr-3 text-pink-500"/><span>{atelie.email}</span>
                                        </div>
                                    </div>
                                </div>
                                <div className="md:w-1/3">
                                    <div className="bg-pink-50 p-6 rounded-lg">
                                        <h3 className="text-xl font-semibold text-pink-800 mb-4">Entre em Contacto</h3>
                                        <p className="text-pink-700 mb-4">Gostou do que viu? Solicite um orçamento ou agende uma visita.</p>
                                        <button onClick={() => onNavigate('login')} className="w-full bg-pink-600 text-white px-4 py-2 rounded-full hover:bg-pink-700 transition">Sou Cliente</button>
                                    </div>
                                </div>
                            </div>
                            <div className="mt-10 border-t pt-8">
                                <h3 className="text-2xl font-bold text-gray-800 mb-4">Galeria de Trabalhos</h3>
                                <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                                    {atelie.images.map((img, index) => (
                                        <img key={index} src={img} alt={`Trabalho ${index + 1} de ${atelie.nome}`} className="w-full h-48 object-cover rounded-lg shadow-md hover:shadow-xl transition-shadow" />
                                    ))}
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        const LoginPage = ({ onNavigate, onLogin }) => (
            <div className="bg-gray-100 min-h-screen flex items-center justify-center">
                <div className="bg-white p-8 rounded-lg shadow-md w-full max-w-md">
                    <h1 className="text-3xl font-bold text-pink-600 text-center mb-6">AteliMatch</h1>
                    <h2 className="text-xl font-semibold text-gray-700 text-center mb-8">Acesse sua conta</h2>
                    <form onSubmit={(e) => e.preventDefault()}>
                        <div className="mb-4">
                            <label className="block text-gray-700 text-sm font-bold mb-2" htmlFor="email">Email</label>
                            <input className="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-pink-500" id="email" type="email" placeholder="seuemail@exemplo.com" defaultValue="atelie@exemplo.com" />
                        </div>
                        <div className="mb-6">
                            <label className="block text-gray-700 text-sm font-bold mb-2" htmlFor="password">Senha</label>
                            <input className="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:ring-2 focus:ring-pink-500" id="password" type="password" placeholder="********" defaultValue="123456" />
                        </div>
                        <div className="flex flex-col space-y-4">
                            <button onClick={() => onLogin('atelie')} className="bg-pink-600 hover:bg-pink-700 text-white font-bold py-2 px-4 rounded-full focus:outline-none focus:shadow-outline transition w-full">Entrar como Ateliê</button>
                            <button onClick={() => onLogin('cliente')} className="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-full focus:outline-none focus:shadow-outline transition w-full">Entrar como Cliente</button>
                        </div>
                        <p className="text-center mt-6 text-sm">
                            <a onClick={() => onNavigate('landing')} className="font-bold text-pink-600 hover:text-pink-800 cursor-pointer">&larr; Voltar para a página inicial</a>
                        </p>
                    </form>
                </div>
            </div>
        );

        const RegisterPage = ({ onNavigate, addAtelie }) => {
            const handleSubmit = (e) => {
                e.preventDefault();
                const newAtelie = {
                    id: Date.now(),
                    nome: e.target.nome_atelie.value,
                    especialidade: e.target.especialidade.value,
                    endereco: e.target.endereco.value,
                    telefone: e.target.telefone.value,
                    email: e.target.email_reg.value,
                    avaliacao: (Math.random() * (5 - 4) + 4).toFixed(1), // Random rating between 4.0 and 5.0
                    images: ["https://placehold.co/600x400/cccccc/ffffff?text=Exemplo+1", "https://placehold.co/600x400/cccccc/ffffff?text=Exemplo+2", "https://placehold.co/600x400/cccccc/ffffff?text=Exemplo+3"]
                };
                addAtelie(newAtelie);
                onNavigate('login');
            };

            return (
                <div className="bg-gray-100 min-h-screen flex items-center justify-center py-12">
                    <div className="bg-white p-8 rounded-lg shadow-md w-full max-w-lg">
                        <h1 className="text-3xl font-bold text-pink-600 text-center mb-6">AteliMatch</h1>
                        <h2 className="text-xl font-semibold text-gray-700 text-center mb-8">Registe o seu Ateliê</h2>
                        <form onSubmit={handleSubmit}>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div className="mb-4"><label className="block text-gray-700 text-sm font-bold mb-2" htmlFor="nome_atelie">Nome do Ateliê</label><input className="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" id="nome_atelie" type="text" placeholder="Ex: Costuras da Ana" required/></div>
                                <div className="mb-4"><label className="block text-gray-700 text-sm font-bold mb-2" htmlFor="especialidade">Especialidade</label><input className="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" id="especialidade" type="text" placeholder="Ex: Vestidos de Festa" required/></div>
                            </div>
                            <div className="mb-4"><label className="block text-gray-700 text-sm font-bold mb-2" htmlFor="endereco">Endereço Completo</label><input className="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" id="endereco" type="text" placeholder="Rua, Número, Bairro, Cidade, Estado" required/></div>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div className="mb-4"><label className="block text-gray-700 text-sm font-bold mb-2" htmlFor="telefone">Telefone</label><input className="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" id="telefone" type="tel" placeholder="(48) 99999-9999" required/></div>
                                <div className="mb-4"><label className="block text-gray-700 text-sm font-bold mb-2" htmlFor="email_reg">Email de Contato</label><input className="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" id="email_reg" type="email" placeholder="contato@seuatelie.com" required/></div>
                            </div>
                            <div className="mb-6"><label className="block text-gray-700 text-sm font-bold mb-2" htmlFor="senha_reg">Crie uma Senha</label><input className="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" id="senha_reg" type="password" placeholder="********" required/></div>
                            <div className="flex items-center justify-between"><button className="bg-pink-600 hover:bg-pink-700 text-white font-bold py-2 px-4 rounded-full focus:outline-none focus:shadow-outline transition w-full" type="submit">Criar Conta</button></div>
                            <p className="text-center mt-6 text-sm">Já tem uma conta? <a onClick={() => onNavigate('login')} className="font-bold text-pink-600 hover:text-pink-800 cursor-pointer">Faça login</a></p>
                        </form>
                    </div>
                </div>
            );
        };
        
        // ================== DASHBOARD COMPONENTS ==================
        
        const PedidosStatusChart = ({ pedidos }) => {
            const data = [
                { status: 'Concluído', value: pedidos.filter(p => p.status === 'Concluído').length, color: 'text-green-500', fill: '#10B981' },
                { status: 'Em Progresso', value: pedidos.filter(p => p.status === 'Em Progresso').length, color: 'text-yellow-500', fill: '#F59E0B' },
                { status: 'Aguardando Material', value: pedidos.filter(p => p.status === 'Aguardando Material').length, color: 'text-orange-500', fill: '#F97316' },
                { status: 'Novo', value: pedidos.filter(p => p.status === 'Novo').length, color: 'text-blue-500', fill: '#3B82F6' },
            ];
            
            const total = data.reduce((acc, item) => acc + item.value, 0);
            
            let accumulated = 0;
            const chartData = data.map(item => {
                const percentage = total > 0 ? (item.value / total) * 100 : 0;
                const offset = accumulated;
                accumulated += percentage;
                return { ...item, percentage, offset };
            });

            const radius = 60;
            const circumference = 2 * Math.PI * radius;

            return (
                <div className="bg-white p-6 rounded-lg shadow">
                    <h3 className="font-semibold text-gray-800 mb-4">Pedidos por Status</h3>
                    <div className="flex flex-col md:flex-row items-center justify-center gap-6">
                        <div className="relative w-48 h-48">
                            <svg className="transform -rotate-90" width="100%" height="100%" viewBox="0 0 140 140">
                                <circle className="text-gray-200" strokeWidth="20" stroke="currentColor" fill="transparent" r={radius} cx="70" cy="70" />
                                {chartData.map((item) => (
                                    <circle
                                        key={item.status}
                                        className={item.color}
                                        strokeWidth="20"
                                        strokeDasharray={circumference}
                                        strokeDashoffset={circumference - (item.percentage / 100) * circumference}
                                        transform={`rotate(${(item.offset / 100) * 360} 70 70)`}
                                        stroke="currentColor"
                                        fill="transparent"
                                        r={radius}
                                        cx="70"
                                        cy="70"
                                    />
                                ))}
                            </svg>
                            <span className="absolute inset-0 flex items-center justify-center text-2xl font-bold text-gray-700">{total}<span className="text-sm font-medium ml-1">pedidos</span></span>
                        </div>
                        <ul className="flex flex-col justify-center space-y-2">
                            {chartData.map(item => (
                                <li key={item.status} className="flex items-center text-sm">
                                    <span className={`w-3 h-3 rounded-full mr-2`} style={{backgroundColor: item.fill}}></span>
                                    <span className="text-gray-600">{item.status}:</span>
                                    <span className="font-semibold text-gray-800 ml-1">{item.value}</span>
                                </li>
                            ))}
                        </ul>
                    </div>
                </div>
            );
        };

        const FaturamentoChart = ({ faturamento }) => {
            const data = faturamento;
            const maxValue = Math.max(...data.map(d => d.valor));
            const chartHeight = 200;
            const barWidth = 40;
            const gap = 20;

            return (
                <div className="bg-white p-6 rounded-lg shadow">
                    <h3 className="font-semibold text-gray-800 mb-4">Faturamento Mensal</h3>
                    <div className="w-full overflow-x-auto">
                         <svg width={data.length * (barWidth + gap) + 40} height={chartHeight + 40} className="font-sans">
                            {[...Array(5)].map((_, i) => (
                                <g key={i}>
                                    <line x1="30" y1={(chartHeight / 4) * i + 10} x2={data.length * (barWidth + gap) + 30} y2={(chartHeight / 4) * i + 10} stroke="#e5e7eb" strokeWidth="1"/>
                                    <text x="25" y={(chartHeight / 4) * i + 15} textAnchor="end" fontSize="10" fill="#6b7280">
                                        {Math.round(maxValue * (1 - i/4) / 100) * 100}
                                    </text>
                                </g>
                            ))}
                            {data.map((d, i) => {
                                const barHeight = maxValue > 0 ? (d.valor / maxValue) * chartHeight : 0;
                                return (
                                    <g key={d.mes}>
                                        <rect x={i * (barWidth + gap) + 40} y={chartHeight - barHeight + 10} width={barWidth} height={barHeight} className="text-pink-500" fill="currentColor" rx="4"/>
                                        <text x={i * (barWidth + gap) + barWidth/2 + 40} y={chartHeight + 30} textAnchor="middle" fontSize="12" fill="#374151">{d.mes}</text>
                                    </g>
                                );
                            })}
                        </svg>
                    </div>
                </div>
            );
        };

        const NovosClientesChart = ({ novosClientes }) => {
            const data = novosClientes;
            const maxValue = Math.max(...data.map(d => d.quantidade));
            const chartWidth = 280;
            const chartHeight = 150;

            const points = data.map(
                (d, i) => `${(i / (data.length - 1)) * chartWidth},${chartHeight - (maxValue > 0 ? (d.quantidade / maxValue) * chartHeight : 0)}`
            ).join(' ');

            return (
                 <div className="bg-white p-6 rounded-lg shadow">
                    <h3 className="font-semibold text-gray-800 mb-4">Aquisição de Novos Clientes</h3>
                    <div className="w-full" style={{height: `${chartHeight+40}px`}}>
                        <svg width="100%" height="100%" viewBox={`0 0 ${chartWidth} ${chartHeight + 30}`}>
                            <polyline fill="none" stroke="#8b5cf6" strokeWidth="2" points={points}/>
                            {data.map((d,i) => {
                                const x = (i / (data.length - 1)) * chartWidth;
                                const y = chartHeight - (maxValue > 0 ? (d.quantidade / maxValue) * chartHeight : 0);
                                return(
                                <g key={d.mes}>
                                  <circle cx={x} cy={y} r="4" fill="#8b5cf6" />
                                  <text x={x} y={chartHeight + 20} textAnchor="middle" fontSize="12" fill="#374151">{d.mes}</text>
                                </g>
                                )
                            })}
                        </svg>
                    </div>
                </div>
            )
        }

        const ItensGastosChart = ({ itens }) => {
            const data = [...itens].sort((a,b) => b.quantidade - a.quantidade);
            const maxValue = Math.max(...data.map(d => d.quantidade));

            return (
                 <div className="bg-white p-6 rounded-lg shadow">
                    <h3 className="font-semibold text-gray-800 mb-4">Itens Mais Utilizados (Mês)</h3>
                    <div className="space-y-4">
                        {data.map(item => (
                            <div key={item.item}>
                                <div className="flex justify-between mb-1">
                                    <span className="text-sm font-medium text-gray-700">{item.item}</span>
                                    <span className="text-sm font-medium text-gray-500">{item.quantidade} un.</span>
                                </div>
                                <div className="w-full bg-gray-200 rounded-full h-2.5">
                                    <div className="bg-purple-600 h-2.5 rounded-full" style={{ width: `${maxValue > 0 ? (item.quantidade / maxValue) * 100 : 0}%` }}></div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }


        const AtelieDashboard = ({ onLogout, appData, addPedido }) => {
            const { pedidos, estoque, clientes, faturamento, novosClientes, itensGastos } = appData;
            const [activeTab, setActiveTab] = useState('painel');
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [modalContent, setModalContent] = useState({ title: '', body: null });

            const openModal = (title, content) => { setModalContent({ title, body: content }); setIsModalOpen(true); };
            const StatusBadge = ({ status }) => {
                let colorClasses = '';
                switch (status) {
                    case 'Novo': colorClasses = 'bg-blue-100 text-blue-800'; break;
                    case 'Em Progresso': colorClasses = 'bg-yellow-100 text-yellow-800'; break;
                    case 'Aguardando Material': colorClasses = 'bg-orange-100 text-orange-800'; break;
                    case 'Concluído': colorClasses = 'bg-green-100 text-green-800'; break;
                    default: colorClasses = 'bg-gray-100 text-gray-800';
                }
                return <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${colorClasses}`}>{status}</span>;
            };
            const NovoPedidoForm = ({ onClose }) => {
                 const handlePedidoSubmit = (e) => {
                    e.preventDefault();
                    const newPedido = {
                        id: Date.now(),
                        cliente: e.target.cliente.value,
                        servico: e.target.servico.value,
                        valor: parseFloat(e.target.valor.value),
                        dataEntrada: new Date().toISOString().slice(0, 10),
                        dataPrevista: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().slice(0, 10), // 7 days from now
                        status: 'Novo',
                        costureira: "Equipa"
                    };
                    addPedido(newPedido);
                    onClose();
                };
                return (
                    <form onSubmit={handlePedidoSubmit}>
                        <div className="space-y-4">
                            <div><label className="block text-sm font-medium text-gray-700">Nome do Cliente</label><input name="cliente" type="text" className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-pink-500 focus:border-pink-500" required/></div>
                            <div><label className="block text-sm font-medium text-gray-700">Descrição do Serviço</label><textarea name="servico" rows="3" className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-pink-500 focus:border-pink-500" required></textarea></div>
                            <div><label className="block text-sm font-medium text-gray-700">Valor (R$)</label><input name="valor" type="number" step="0.01" className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-pink-500 focus:border-pink-500" required/></div>
                            <div className="flex justify-end space-x-3 mt-6"><button type="button" onClick={onClose} className="bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300">Cancelar</button><button type="submit" className="bg-pink-600 text-white px-4 py-2 rounded-md hover:bg-pink-700">Adicionar Pedido</button></div>
                        </div>
                    </form>
                );
            };
            const tabs = {
                painel: (
                    <div>
                        <h2 className="text-2xl font-semibold text-gray-800 mb-6">Painel Geral</h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            <div className="bg-white p-6 rounded-lg shadow"><h3 className="text-gray-500 font-medium">Pedidos Ativos</h3><p className="text-3xl font-bold text-pink-600 mt-2">{pedidos.filter(p => p.status !== 'Concluído').length}</p></div>
                            <div className="bg-white p-6 rounded-lg shadow"><h3 className="text-gray-500 font-medium">Faturamento (Mês)</h3><p className="text-3xl font-bold text-pink-600 mt-2">R$ {faturamento.find(f => f.mes === 'Jun/25')?.valor.toFixed(2) || '0.00'}</p></div>
                            <div className="bg-white p-6 rounded-lg shadow"><h3 className="text-gray-500 font-medium">Itens em Baixo Estoque</h3><p className="text-3xl font-bold text-red-500 mt-2">{estoque.filter(item => item.quantidade <= item.nivelMinimo).length}</p></div>
                            <div className="bg-white p-6 rounded-lg shadow"><h3 className="text-gray-500 font-medium">Total de Clientes</h3><p className="text-3xl font-bold text-pink-600 mt-2">{clientes.length}</p></div>
                        </div>
                        <div className="mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <PedidosStatusChart pedidos={pedidos} />
                            <FaturamentoChart faturamento={faturamento} />
                        </div>
                        <div className="mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <NovosClientesChart novosClientes={novosClientes} />
                            <ItensGastosChart itens={itensGastos} />
                        </div>
                    </div>
                ),
                pedidos: (<div><div className="flex justify-between items-center mb-6"><h2 className="text-2xl font-semibold text-gray-800">Gestão de Pedidos</h2><button onClick={() => openModal('Adicionar Novo Pedido', <NovoPedidoForm onClose={() => setIsModalOpen(false)} />)} className="flex items-center bg-pink-600 text-white px-4 py-2 rounded-lg hover:bg-pink-700 transition"><PlusCircle size={20} className="mr-2" />Novo Pedido</button></div><div className="bg-white rounded-lg shadow overflow-x-auto"><table className="min-w-full divide-y divide-gray-200"><thead className="bg-gray-50"><tr><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cliente</th><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Serviço</th><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor</th><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Costureira</th></tr></thead><tbody className="bg-white divide-y divide-gray-200">{pedidos.map(pedido => (<tr key={pedido.id}><td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{pedido.cliente}</td><td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{pedido.servico}</td><td className="px-6 py-4 whitespace-nowrap text-sm"><StatusBadge status={pedido.status} /></td><td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">R$ {pedido.valor.toFixed(2)}</td><td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{pedido.costureira}</td></tr>))}</tbody></table></div></div>),
                estoque: (<div><h2 className="text-2xl font-semibold text-gray-800 mb-6">Controle de Estoque</h2><div className="bg-white rounded-lg shadow overflow-x-auto"><table className="min-w-full divide-y divide-gray-200"><thead className="bg-gray-50"><tr><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Item</th><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quantidade Atual</th><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nível Mínimo</th><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th></tr></thead><tbody className="bg-white divide-y divide-gray-200">{estoque.map(item => (<tr key={item.id} className={item.quantidade <= item.nivelMinimo ? 'bg-red-50' : ''}><td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{item.item}</td><td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{item.quantidade}</td><td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{item.nivelMinimo}</td><td className="px-6 py-4 whitespace-nowrap text-sm">{item.quantidade <= item.nivelMinimo ? <span className="flex items-center text-red-600"><AlertCircle size={16} className="mr-1"/>Baixo</span> : <span className="text-green-600">OK</span>}</td></tr>))}</tbody></table></div></div>),
                clientes: (<div><h2 className="text-2xl font-semibold text-gray-800 mb-6">Clientes</h2><div className="bg-white rounded-lg shadow overflow-x-auto"><table className="min-w-full divide-y divide-gray-200"><thead className="bg-gray-50"><tr><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome</th><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Telefone</th><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cliente Desde</th></tr></thead><tbody className="bg-white divide-y divide-gray-200">{clientes.map(cliente => (<tr key={cliente.id}><td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{cliente.nome}</td><td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{cliente.telefone}</td><td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{cliente.email}</td><td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{cliente.desde}</td></tr>))}</tbody></table></div></div>),
                'meu-atelie': (<div><h2 className="text-2xl font-semibold text-gray-800 mb-6">Meu Ateliê</h2><div className="bg-white p-8 rounded-lg shadow w-full"><form><div className="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label className="block text-sm font-medium text-gray-700">Nome do Ateliê</label><input type="text" defaultValue="Costuras da Ana" className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-pink-500 focus:border-pink-500" /></div><div><label className="block text-sm font-medium text-gray-700">Especialidade</label><input type="text" defaultValue="Ajustes e Reparos" className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-pink-500 focus:border-pink-500" /></div><div><label className="block text-sm font-medium text-gray-700">Endereço</label><input type="text" defaultValue="Rua das Flores, 123, Araranguá, SC" className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-pink-500 focus:border-pink-500" /></div><div><label className="block text-sm font-medium text-gray-700">Telefone</label><input type="tel" defaultValue="(48) 99988-7766" className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-pink-500 focus:border-pink-500" /></div></div><div className="mt-6"><button type="submit" className="bg-pink-600 text-white px-6 py-2 rounded-lg hover:bg-pink-700">Salvar Alterações</button></div></form></div></div>)
            };
            const NavItem = ({ icon: Icon, label, tabName }) => (<li className="mb-2"><a href="#" onClick={(e) => { e.preventDefault(); setActiveTab(tabName); isMenuOpen && setIsMenuOpen(false); }} className={`flex items-center p-3 rounded-lg transition-colors ${activeTab === tabName ? 'bg-pink-600 text-white' : 'text-gray-600 hover:bg-pink-100 hover:text-pink-700'}`}><Icon size={20} className="mr-3" /><span className="font-medium">{label}</span></a></li>);
            const SidebarContent = () => (<React.Fragment><div className="p-6"><h1 className="text-3xl font-bold text-pink-600">AteliMatch</h1></div><nav className="px-4"><ul><NavItem icon={Home} label="Painel" tabName="painel" /><NavItem icon={ShoppingBag} label="Pedidos" tabName="pedidos" /><NavItem icon={Archive} label="Estoque" tabName="estoque" /><NavItem icon={Users} label="Clientes" tabName="clientes" /><NavItem icon={Settings} label="Meu Ateliê" tabName="meu-atelie" /></ul></nav><div className="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200"><a href="#" onClick={onLogout} className="flex items-center p-3 rounded-lg text-gray-600 hover:bg-gray-200"><LogOut size={20} className="mr-3" /><span className="font-medium">Sair</span></a></div></React.Fragment>);
            return (<div className="flex min-h-screen bg-gray-100"><aside className="hidden lg:block w-64 bg-white border-r border-gray-200 flex-shrink-0 relative"><SidebarContent /></aside>{isMenuOpen && (<div className="lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40" onClick={() => setIsMenuOpen(false)}></div>)}<aside className={`lg:hidden fixed top-0 left-0 h-full w-64 bg-white z-50 transform ${isMenuOpen ? 'translate-x-0' : '-translate-x-full'} transition-transform duration-300 ease-in-out`}><SidebarContent /></aside><main className="flex-1 p-6 lg:p-10"><div className="lg:hidden flex justify-between items-center mb-6"><button onClick={() => setIsMenuOpen(!isMenuOpen)} className="text-gray-600">{isMenuOpen ? <X size={24} /> : <MenuIcon/>}</button><h1 className="text-xl font-bold text-pink-600">AteliMatch</h1><div></div></div>{tabs[activeTab]}</main><Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title={modalContent.title}>{modalContent.body}</Modal></div>);
        };

        const ClientDashboard = ({ onLogout, pedidos }) => {
            return (
                <div className="bg-gray-100 min-h-screen">
                    <header className="bg-white shadow-sm"><div className="container mx-auto px-6 py-4 flex justify-between items-center"><h1 className="text-2xl font-bold text-purple-600">AteliMatch</h1><button onClick={onLogout} className="flex items-center text-gray-600 hover:text-purple-600"><LogOut size={20} className="mr-2"/>Sair</button></div></header>
                    <main className="container mx-auto px-6 py-10">
                        <h2 className="text-3xl font-bold text-gray-800 mb-8">Bem-vinda, Maria Silva!</h2>
                        <div className="bg-white p-8 rounded-lg shadow"><h3 className="text-xl font-semibold text-gray-700 mb-6">Meus Pedidos Recentes</h3><div className="overflow-x-auto"><table className="min-w-full divide-y divide-gray-200"><thead className="bg-gray-50"><tr><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Serviço</th><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ateliê</th><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Previsão de Entrega</th></tr></thead><tbody className="bg-white divide-y divide-gray-200">{pedidos.filter(p => p.cliente === "Maria Silva").map(pedido => (<tr key={pedido.id}><td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{pedido.servico}</td><td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Costuras da Ana</td><td className="px-6 py-4 whitespace-nowrap text-sm">{pedido.status}</td><td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{pedido.dataPrevista}</td></tr>))}</tbody></table></div></div>
                    </main>
                </div>
            );
        };

        function App() {
            // STATE MANAGEMENT - Gerencia todos os dados da aplicação
            const [atelies, setAtelies] = useState(() => getInitialData('atelies', initialMockAtelies));
            const [pedidos, setPedidos] = useState(() => getInitialData('pedidos', initialMockPedidos));
            const [estoque, setEstoque] = useState(() => getInitialData('estoque', initialMockEstoque));
            const [clientes, setClientes] = useState(() => getInitialData('clientes', initialMockClientes));
            const [faturamento, setFaturamento] = useState(() => getInitialData('faturamento', initialMockFaturamento));
            const [novosClientes, setNovosClientes] = useState(() => getInitialData('novosClientes', initialMockNovosClientes));
            const [itensGastos, setItensGastos] = useState(() => getInitialData('itensGastos', initialMockItensGastos));
            
            const [currentPage, setCurrentPage] = useState('landing');
            const [userType, setUserType] = useState(null);
            const [selectedAtelie, setSelectedAtelie] = useState(null);

            // FUNÇÕES PARA MODIFICAR DADOS (e persistir no localStorage)
            const addAtelie = (newAtelie) => {
                const updatedAtelies = [...atelies, newAtelie];
                setAtelies(updatedAtelies);
                localStorage.setItem('atelies', JSON.stringify(updatedAtelies));
            };
            
            const addPedido = (newPedido) => {
                const updatedPedidos = [...pedidos, newPedido];
                setPedidos(updatedPedidos);
                localStorage.setItem('pedidos', JSON.stringify(updatedPedidos));
            };

            const appData = { atelies, pedidos, estoque, clientes, faturamento, novosClientes, itensGastos };

            const handleNavigate = (page) => { setCurrentPage(page); };
            const handleLogin = (type) => { setUserType(type); setCurrentPage(type === 'atelie' ? 'dashboardAtelie' : 'dashboardClient'); };
            const handleLogout = () => { setUserType(null); setCurrentPage('landing'); };
            const handleViewAtelie = (atelie) => { setSelectedAtelie(atelie); setCurrentPage('atelieDetail'); }

            switch (currentPage) {
                case 'login': return <LoginPage onNavigate={handleNavigate} onLogin={handleLogin} />;
                case 'register': return <RegisterPage onNavigate={handleNavigate} addAtelie={addAtelie} />;
                case 'dashboardAtelie': return <AtelieDashboard onLogout={handleLogout} appData={appData} addPedido={addPedido} />;
                case 'dashboardClient': return <ClientDashboard onLogout={handleLogout} pedidos={pedidos} />;
                case 'atelieDetail': return <AtelieDetailPage atelie={selectedAtelie} onNavigate={handleNavigate} />;
                case 'landing':
                default: return <LandingPage onNavigate={handleNavigate} onViewAtelie={handleViewAtelie} atelies={atelies}/>;
            }
        }

        //======================================================================
        // RENDERIZAÇÃO DA APLICAÇÃO REACT
        //======================================================================
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
